<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>观察者模式</title>
</head>
<body>
    <script>
        // 发布者 
     class Dep {
         constructor() {
             // 记录所有订阅者
             this.subs = []
         }
         addSub(sub) {
             // 判断sub是否是一个观察者对象
             // 观察者对象具有update方法
            if(sub && sub.update) {
                this.subs.push(sub)
            }
         }
         // 发布通知
         notify() {
             this.subs.forEach(sub => {
                 sub.update()
             })
         }
     }
     // 观察者
     class Watcher {
         update() {
             console.log("update")
         }
     }

     let dep = new Dep()
     let watcher = new Watcher()
     dep.addSub(watcher)
     dep.notify()
    </script>
</body>
</html>